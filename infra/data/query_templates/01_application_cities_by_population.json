{
    "intent": "top_bottom_cities_by_population_in_state",
    "question": "What are the most populated cities in a given state or province?",
    "sql_template": "SELECT TOP %{{count}}% c.CityName, c.LatestRecordedPopulation, sp.StateProvinceName FROM Application.Cities c JOIN Application.StateProvinces sp ON c.StateProvinceID = sp.StateProvinceID WHERE sp.StateProvinceName = '%{{state_name}}%' AND c.LatestRecordedPopulation IS NOT NULL ORDER BY c.LatestRecordedPopulation %{{order}}%",
    "reasoning": "Joins Cities with StateProvinces to filter by state name and rank cities by recorded population. Useful for understanding geographic market size within a state.",
    "parameters": [
        {
            "name": "state_name",
            "column": "StateProvinceName",
            "table": "Application.StateProvinces",
            "allowed_values_source": "database",
            "required": true,
            "ask_if_missing": true,
            "default_value": null,
            "default_policy": null,
            "confidence_weight": 1.0,
            "normalization": {
                "lowercase": false,
                "strip": true
            },
            "validation": {
                "type": "string"
            }
        },
        {
            "name": "count",
            "column": null,
            "required": true,
            "ask_if_missing": false,
            "default_value": 10,
            "default_policy": null,
            "confidence_weight": 1.0,
            "normalization": null,
            "validation": {
                "type": "integer",
                "min": 1,
                "max": 100
            }
        },
        {
            "name": "order",
            "column": null,
            "required": true,
            "ask_if_missing": false,
            "default_value": "DESC",
            "default_policy": null,
            "confidence_weight": 1.0,
            "normalization": {
                "lowercase": false,
                "strip": true
            },
            "validation": {
                "type": "string",
                "allowed_values": [
                    "ASC",
                    "DESC"
                ]
            }
        }
    ]
}
