{
    "intent": "list_customers_by_total_spent",
    "question": "Which customers have spent the most money in total?",
    "sql_template": "SELECT TOP %{{count}}% Sales.Customers.CustomerID, Sales.Customers.CustomerName, SUM(Sales.InvoiceLines.ExtendedPrice) AS TotalSpent FROM Sales.Customers JOIN Sales.Invoices ON Sales.Customers.CustomerID = Sales.Invoices.CustomerID JOIN Sales.InvoiceLines ON Sales.Invoices.InvoiceID = Sales.InvoiceLines.InvoiceID GROUP BY Sales.Customers.CustomerID, Sales.Customers.CustomerName ORDER BY TotalSpent %{{order}}%",
    "reasoning": "This query joins Customers, Invoices, and InvoiceLines to calculate total spending per customer. It groups by customer and orders by total spent ascending or descending to find the top or least spenders.",
    "parameters": [
        {
            "name": "count",
            "column": null,
            "required": true,
            "ask_if_missing": false,
            "default_value": 30,
            "default_policy": null,
            "confidence_weight": 0.4,
            "normalization": null,
            "validation": {
                "type": "integer",
                "min": 1,
                "max": 100
            }
        },
        {
            "name": "order",
            "column": null,
            "required": true,
            "ask_if_missing": false,
            "default_value": "DESC",
            "default_policy": null,
            "confidence_weight": 0.4,
            "normalization": {
                "lowercase": false,
                "strip": true
            },
            "validation": {
                "type": "string",
                "allowed_values": ["ASC", "DESC"]
            }
        }
    ],
    "allowed_tables": [
        "Sales.Customers",
        "Sales.Invoices",
        "Sales.InvoiceLines"
    ],
    "allowed_columns": [
        "Sales.Customers.CustomerID",
        "Sales.Customers.CustomerName",
        "Sales.InvoiceLines.ExtendedPrice"
    ]
}